# 🚀 دليل النشر الشامل | Complete Deployment Guide

## 📋 معلومات النشر الأساسية

### 🎯 روابط النشر المتاحة
- **Replit:** سيتم إنشاؤه عند النشر
- **Vercel:** سيتم إنشاؤه عند النشر
- **محلياً:** http://localhost:5000

### 🔐 بيانات الاعتماد الافتراضية
```
🔧 حساب المدير الافتراضي:
- اسم المستخدم: admin
- كلمة المرور: admin123
- البريد الإلكتروني: admin@example.com

⚠️ يجب تغيير هذه البيانات فوراً بعد النشر الأول!
```

## 🛠️ خطوات النشر

### 1️⃣ النشر على Replit

#### الخطوة الأولى: تحضير المشروع
```bash
# فحص الأمان
npm audit
npm run security-check

# اختبار المشروع محلياً
npm start
```

#### الخطوة الثانية: النشر
```bash
# في Replit، تأكد من أن المشروع يعمل
# ثم اضغط على زر "Deploy" في لوحة التحكم
# أو استخدم الأمر التالي في Shell:
replit deployments create
```

#### إعدادات Replit المطلوبة:
- ✅ تفعيل "Always On" 
- ✅ تعيين متغيرات البيئة:
  ```
  NODE_ENV=production
  ENCRYPTION_KEY=your-secret-encryption-key-here
  ```

### 2️⃣ النشر على Vercel

#### التثبيت والإعداد:
```bash
# تثبيت Vercel CLI
npm install -g vercel

# تسجيل الدخول
vercel login

# النشر
vercel --prod --confirm
```

#### ملف vercel.json (سيتم إنشاؤه):
```json
{
  "version": 2,
  "builds": [
    {
      "src": "server.js",
      "use": "@vercel/node"
    }
  ],
  "routes": [
    {
      "src": "/(.*)",
      "dest": "/server.js"
    }
  ],
  "env": {
    "NODE_ENV": "production"
  }
}
```

## 🔒 الإعدادات الأمنية المطلوبة

### متغيرات البيئة الضرورية:
```bash
NODE_ENV=production
ENCRYPTION_KEY=your-unique-32-character-key
SESSION_SECRET=your-session-secret-key
TRX_WALLET_ADDRESS=TR2AQWkYfU29n2dh8LMPQL5WvZVSrPkzHa
TELEGRAM_SUPPORT_URL=https://t.me/Chafcha_azizos
```

### فحص الأمان بعد النشر:
```bash
# فحص SSL
curl -I https://your-domain.com

# فحص headers الأمان
curl -I https://your-domain.com/security-status

# مراقبة الصحة
curl https://your-domain.com/health
```

## 📊 مراقبة ما بعد النشر

### 1. فحص الحالة الصحية:
- **الرابط:** `https://your-domain.com/health`
- **التوقع:** استجابة 200 مع معلومات النظام

### 2. فحص الأمان:
- **الرابط:** `https://your-domain.com/security-status`
- **التوقع:** تأكيد تفعيل جميع الحمايات

### 3. اختبار الوظائف الأساسية:
- ✅ تسجيل الدخول/الخروج
- ✅ إنشاء حساب جديد
- ✅ عرض العقود
- ✅ صفحة الإيداع مع QR Code
- ✅ لوحة الإدارة
- ✅ رابط الدعم عبر Telegram

## 🛠️ استكشاف الأخطاء

### المشاكل الشائعة والحلول:

#### 1. خطأ في قاعدة البيانات:
```bash
# التحقق من وجود ملف قاعدة البيانات
ls -la database.sqlite

# إعادة إنشاء الجداول
node config/database.js
```

#### 2. مشاكل الاتصال:
```bash
# فحص المنفذ
netstat -tulpn | grep :5000

# فحص العمليات النشطة
ps aux | grep node
```

#### 3. مشاكل الأمان:
```bash
# فحص إعدادات CORS
curl -H "Origin: https://malicious-site.com" https://your-domain.com/api/profile

# فحص Rate Limiting
# أرسل 100+ طلب سريع وتأكد من الحظر
```

#### 4. مشاكل النسخ الاحتياطي:
```bash
# التحقق من مجلد النسخ الاحتياطية
ls -la backups/

# إنشاء نسخة احتياطية يدوية
npm run backup
```

## 📋 قائمة التحقق بعد النشر

### ✅ الاختبارات الأساسية:
- [ ] الصفحة الرئيسية تعمل بشكل صحيح
- [ ] تسجيل الدخول/الخروج يعمل
- [ ] إنشاء حساب جديد يعمل
- [ ] عرض العقود صحيح
- [ ] صفحة الإيداع تعرض عنوان TRX الصحيح
- [ ] QR Code يظهر بشكل صحيح
- [ ] لوحة الإدارة تعمل للمدير
- [ ] رابط Telegram يعمل
- [ ] الواجهة العربية تظهر بشكل صحيح (RTL)

### ✅ الاختبارات الأمنية:
- [ ] SSL Certificate نشط ويعمل
- [ ] Headers الأمان موجودة (helmet)
- [ ] CORS مُكوّن بشكل صحيح
- [ ] Rate Limiting يعمل
- [ ] تشفير البيانات الحساسة يعمل
- [ ] النسخ الاحتياطي مجدولة

### ✅ اختبارات الأداء:
- [ ] ضغط البيانات مفعل
- [ ] أوقات الاستجابة مقبولة (< 2 ثانية)
- [ ] استهلاك الذاكرة طبيعي
- [ ] لا توجد تسريبات في الذاكرة

## 🆘 جهات الاتصال للدعم

### 🔧 الدعم التقني:
- **Telegram:** [@Chafcha_azizos](https://t.me/Chafcha_azizos)
- **البريد الإلكتروني:** support@your-domain.com

### 📋 معلومات النسخة:
```
الإصدار: 1.0.0
تاريخ النشر: [سيتم تحديثه تلقائياً]
Node.js: >= 16.0.0
قاعدة البيانات: SQLite3
الأمان: Helmet + CORS + Rate Limiting
النسخ الاحتياطي: يومي تلقائي
```

## 🔄 تحديثات مستقبلية

### خطة التطوير:
1. **إضافة مراقبة متقدمة** (Sentry/LogRocket)
2. **ربط مع AWS S3** للنسخ الاحتياطية
3. **إضافة إشعارات البريد الإلكتروني**
4. **تحسين واجهة المستخدم**
5. **إضافة المزيد من العملات المشفرة**

---

## ⚠️ تنبيهات مهمة

1. **غيّر كلمة مرور المدير** فوراً بعد النشر الأول
2. **احتفظ بنسخة من مفاتيح التشفير** في مكان آمن
3. **راقب الأمان بانتظام** باستخدام endpoint /security-status
4. **تحقق من النسخ الاحتياطية** دورياً
5. **حدّث التبعيات** بانتظام للحصول على تحديثات الأمان

---

*تم إنشاء هذا الدليل تلقائياً بواسطة نظام النشر الذكي*
*آخر تحديث: [سيتم تحديثه تلقائياً]*